Foundry.run(function(a){a.fn.autogrow=function(b){return this.filter("textarea").each(function(){function g(){e.val(c.val()),e[0].scrollHeight;var a=e[0].scrollHeight;a>d.maxHeight&&d.maxHeight>0?(a=d.maxHeight,c.css("overflow","auto")):(a=a<d.minHeight?d.minHeight:a,c.css("overflow","hidden")),c.height(a+d.lineHeight*d.lineBleed)}var c=a(this);if(c.hasClass("shadow"))return;c.unbind("focus.autogrow blur.autogrow keyup.autogrow keypress.autogrow autogrow");var d=b||{},e=c.data("shadow"),f=c.outerHeight()-c.innerHeight();e&&e.remove(),e=c.clone().unbind().removeAttr("name").addClass("shadow").css({visibility:"hidden",height:0}),c.css("position")!=="absolute"&&e.css({position:"relative",borderTop:"none",borderBottom:"none",marginTop:0,marginBottom:-1*(parseInt(c.css("paddingTop"))+parseInt(c.css("paddingBottom")))}),e.insertAfter(c),c.data("shadow",e).bind("focus.autogrow blur.autogrow keyup.autogrow keypress.autogrow autogrow",g),d.lineHeight==undefined&&(d.lineHeight=e.val(" ")[0].scrollHeight),d.minHeight==undefined&&(d.minHeight=c.height()),d.maxHeight==undefined&&(d.maxHeight=0),d.lineBleed==undefined&&(d.lineBleed=0),g()}),this}});